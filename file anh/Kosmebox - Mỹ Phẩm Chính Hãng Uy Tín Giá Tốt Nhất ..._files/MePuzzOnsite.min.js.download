var ViteexOnsite=function(){var e="https://api.mepuzz.com/v1";function t(t,i,c,r,d){let a=document.getElementById(`viteex-btn-submit-${t}`),s=!0;a&&a.addEventListener("click",function(){if("false"==a.getAttribute("submited")){let a,l=document.getElementById(`contact-name-${t}`),u=document.getElementById(`contact-phone-${t}`),m=document.getElementById(`contact-email-${t}`),_=document.getElementById(`contact-address-${t}`),g=document.getElementById(`contact-select-${t}`),h=document.getElementById(`contact-radio-${t}`),f=document.getElementById(`contact-checkbox-${t}`);l&&void 0!==l.value&&"true"==l.getAttribute("is-required")&&(a={checkName:n(`contact-name-${t}`,`err_name-${t}`,"en"===i?"You have not entered your full name.":"Bạn chưa nhập họ tên.")}),u&&void 0!==u.value&&"true"==u.getAttribute("is-required")&&(a={...a,checkPhone:function(e,t,n){let o=document.getElementById(e),i=new RegExp(/((09|03|07|08|05)+([0-9]{8})\b)/g);if(o&&""===o.value)return document.getElementById(t).innerHTML="en"===n?"You did not enter a phone number.":"Bạn chưa nhập số điện thoại.",!1;if(o&&!i.test(o.value))return document.getElementById(t).innerHTML="en"===n?"Your phone number is not in the correct format.":"Số điện thoại của bạn không đúng định dạng.",!1;return document.getElementById(t).innerHTML="",!0}(`contact-phone-${t}`,`err_phone-${t}`,i)}),m&&void 0!==m.value&&"true"==m.getAttribute("is-required")&&(a={...a,checkEmail:function(e,t,n){let o=document.getElementById(e);if(o&&""===o.value)return document.getElementById(t).innerHTML="en"===n?"You have not entered your email yet.":"Bạn chưa nhập email.",!1;if(o&&!/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(o.value))return document.getElementById(t).innerHTML="en"===n?"Your email is not in the correct format.":"Email của bạn không đúng định dạng.",!1;return document.getElementById(t).innerHTML="",!0}(`contact-email-${t}`,`err_email-${t}`,i)}),_&&void 0!==_.value&&"true"==_.getAttribute("is-required")&&(a={...a,checkAddress:n(`contact-address-${t}`,`err_address-${t}`,"en"===i?"You do not enter an address.":"Bạn chưa nhập địa chỉ.")});let y=document.getElementById("total_input").value;for(let e=1;e<=y;e++){let o=document.getElementById(`contact-text-${e}-${t}`);o&&void 0!==o.value&&"true"==o.getAttribute("is-required")&&(a={...a,checkText:n(`contact-text-${e}-${t}`,`err_text_${e}-${t}`,!1,i)})}let p=document.getElementById("total_textarea").value;for(let e=1;e<=p;e++){let o=document.getElementById(`contact-textarea-${e}-${t}`);o&&void 0!==o.value&&"true"==o.getAttribute("is-required")&&(a={...a,checkTextarea:n(`contact-textarea-${e}-${t}`,`err_textarea_${e}-${t}`,!1,i)})}g&&void 0!==g.value&&"true"==g.getAttribute("is-required")&&(a={...a,checkSelect:o(t,`contact-select-${t}`,`err_select-${t}`,!1,i)}),h&&"true"==h.getAttribute("is-required")&&(a={...a,checkRadio:o(t,`contact-radio-${t}`,`err_radio-${t}`,!1,i)}),f&&"true"==f.getAttribute("is-required")&&(a={...a,checkCheckbox:o(t,`contact-checkbox-${t}`,`err_checkbox-${t}`,!1,i)});let v=!0;for(item in a)if(!a[item]){v=!1;break}if(v&&s){s=!1;let n=document.getElementById(`viteex_onsite_form_submit-${t}`);const o=new URLSearchParams(new FormData(n));fetch(e+"/form/submit",{method:"POST",body:o}).then(e=>e.json()).then(function(e){0===e.error?(e.sub_id&&e.sub_id.length>0&&"null"!=e.sub_id&&window.localStorage.setItem("mepuzzId",e.sub_id),document.getElementsByClassName(`viteex_onsite_form-${t}`)[0].style.visibility="hidden",c?window.location.href=c:d?document.getElementsByClassName(`viteex-form__voucher-${t}`)[0].style.display="block":document.getElementsByClassName(`viteex_onsite_form_message-${t}`)[0].style.display="block",r&&setTimeout(()=>{document.getElementById(t).classList.remove("viteex-bn-show")},1e3*r)):console.log(e.message)}).catch(e=>{console.error("Error:",e)})}}})}function n(e,t,n=!1,o){let i=document.getElementById(e);return i&&""===i.value?(document.getElementById(t).innerHTML=n||("en"===o?"You have not entered information here.":"Bạn chưa nhập thông tin vào đây."),!1):(document.getElementById(t).innerHTML="",!0)}function o(e,t,n,o=!1,i){let c=document.getElementById(t);return t!=`contact-radio-${e}`&&t!=`contact-checkbox-${e}`||0!=c.getAttribute("data-check")?t==`contact-select-${e}`&&""===c.value?(document.getElementById(n).innerHTML=o||("en"===i?"You have not selected information.":"Bạn chưa chọn thông tin."),!1):(document.getElementById(n).innerHTML="",!0):(document.getElementById(n).innerHTML=o||("en"===i?"You have not selected information.":"Bạn chưa chọn thông tin."),!1)}function i(e,t){let n=e.offsetWidth,o=document.getElementById(`viteexSuggestsList_${t}`),i=document.getElementById(`viteexArrowLeft_${t}`),c=document.getElementById(`viteexArrowRight_${t}`),r=document.getElementsByClassName(`viteex__suggests__item-${t}`)[0].offsetWidth,d=document.querySelectorAll(`[viteex-data-target='card-${t}']`).length,a=r,s=0;n>=r*d&&(i.style.display="none",c.style.display="none");let l=Math.floor(n/r),u=n-l*r;i.addEventListener("click",function(){s>0&&(a-=r,o.style.transform=`translateX(-${a}px)`,s--)}),c.addEventListener("click",function(){s>0&&(a+=r),0==s&&(a=r),s>=d-l?(o.style.transform="translateX(0px)",a=r,s=0):(o.style.transform=s==d-l-1?`translateX(-${a-u}px)`:`translateX(-${a}px)`,s++)})}function c(e){var t=Date.parse(e)-Date.parse(new Date),n=Math.floor(t/1e3%60),o=Math.floor(t/1e3/60%60),i=Math.floor(t/36e5%24);return{total:t,days:Math.floor(t/864e5),hours:i,minutes:o,seconds:n}}function r(e,t,n){var o=document.getElementById(e),i=o.querySelector(`.days-${n}`),r=o.querySelector(`.hours-${n}`),d=o.querySelector(`.minutes-${n}`),a=o.querySelector(`.seconds-${n}`);function s(){var e=c(t);i.innerHTML=("0"+e.days).slice(-2),r.innerHTML=("0"+e.hours).slice(-2),d.innerHTML=("0"+e.minutes).slice(-2),a.innerHTML=("0"+e.seconds).slice(-2),e.total<=0&&clearInterval(l)}s();var l=setInterval(s,1e3)}function d(e){var t=document.getElementById(`count_down-${e}`).value,n=1e3*(t=parseInt(t))-(new Date).getTime(),o=Math.round(n/1e3),i=new Date(Date.parse(new Date)+1e3*o);return o<86400&&(document.getElementsByClassName("viteex__bn__item-"+e)[0].style.display="none"),o<3600&&(document.getElementsByClassName("viteex__bn__item-"+e)[1].style.display="none"),i}function a(e,t){const n=[{},{}];if(!["d","h","m","s"].includes(e))return n;const o=document.querySelector(`.flip-clock-${e}-${t}`);if(!o)return n;let i;return(i=n[0]).digit=o.querySelector(".digit-left"),i.card=i.digit.querySelector(".viteex__bn_card"),i.cardFaces=i.card.querySelectorAll(".card-face"),i.cardFaceA=i.cardFaces[0],i.cardFaceB=i.cardFaces[1],(i=n[1]).digit=o.querySelector(".digit-right"),i.card=i.digit.querySelector(".viteex__bn_card"),i.cardFaces=i.card.querySelectorAll(".card-face"),i.cardFaceA=i.cardFaces[0],i.cardFaceB=i.cardFaces[1],n}function s(e,t){var n=c(t);0===n.days&&0===n.hours&&0===n.minutes&&0===n.seconds&&clearInterval(loopInterval),n.days=n.days<10?`0${n.days}`:`${n.days}`,n.hours=n.hours<10?`0${n.hours}`:`${n.hours}`,n.minutes=n.minutes<10?`0${n.minutes}`:`${n.minutes}`,n.seconds=n.seconds<10?`0${n.seconds}`:`${n.seconds}`,n.days0=n.days[0],n.days1=n.days[1],n.hours0=n.hours[0],n.hours1=n.hours[1],n.minutes0=n.minutes[0],n.minutes1=n.minutes[1],n.seconds0=n.seconds[0],n.seconds1=n.seconds[1];for(const t of Object.keys(e))for(const o of["0","1"]){const i=n[`${t}${o}`];let c=i-1;"days"===t&&("0"===o&&(c=c),"1"===o&&(c=-1===c?"9":`${c}`)),"hours"===t&&("0"===o&&(c=-1===c?"2":`${c}`),"1"===o&&("1"===n.hours0||"2"===n.hours0?c=-1===c?"9":`${c}`:"0"===n.hours0&&(c=-1===c?"3":`${c}`))),"minutes"===t&&("0"===o&&(c=-1===c?"5":`${c}`),"1"===o&&(c=-1===c?"9":`${c}`)),"seconds"===t&&("0"===o&&(c=-1===c?"5":`${c}`),"1"===o&&(c=-1===c?"9":`${c}`));const r=e[t][o];r&&r.digit&&(r.digit.dataset.digitBefore?r.digit.dataset.digitBefore!==i&&(r.card.addEventListener("transitionend",function(){r.digit.dataset.digitBefore=i,r.cardFaceA.textContent=r.digit.dataset.digitBefore;const e=r.card.cloneNode(!0);e.classList.remove("flipped"),r.digit.replaceChild(e,r.card),r.card=e,r.cardFaces=r.card.querySelectorAll(".card-face"),r.cardFaceA=r.cardFaces[0],r.cardFaceB=r.cardFaces[1],r.digit.dataset.digitAfter=c,r.cardFaceB.textContent=r.digit.dataset.digitAfter},{once:!0}),r.card.classList.contains("flipped")||r.card.classList.add("flipped")):(r.digit.dataset.digitBefore=i,r.cardFaceA.textContent=r.digit.dataset.digitBefore,r.digit.dataset.digitAfter=c,r.cardFaceB.textContent=r.digit.dataset.digitAfter))}}function l(e){let t=!1,n=document.getElementById("viteex_recommendation_embed_"+e.id),o=document.getElementById("mepuzz_recommendation_embed_"+e.id);if(null!=e.tag_id_or_class&&((n=document.getElementById(e.tag_id_or_class))||(n=document.getElementsByClassName(e.tag_id_or_class)[0]),n||!e.tag_id_or_class.includes("#")&&!e.tag_id_or_class.includes(".")||(n=document.querySelector(e.tag_id_or_class)),t=!0),n||o){if(o)o.innerHTML=e.html;else if(t){let t=document.createElement("div"),o=e.html,i=document.createAttribute("id");i.value=`mepuzz_recommendation_embed_${e.id}`,t.setAttributeNode(i),t.innerHTML=o,e.position_embed_content&&"after"==e.position_embed_content?n.after(t):n.before(t)}else n.innerHTML=e.html;let c=document.getElementById(`viteexSuggestsBox_${e.id}`);c&&i(c,e.id),mePuzz.recommentEmbedShow(e.id)}}function u(e){let t=!1,n=document.getElementById("viteex_countdown_embed_"+e.id),o=document.getElementById("mepuzz_countdown_embed_"+e.id);if(null!=e.tag_id_or_class&&((n=document.getElementById(e.tag_id_or_class))||(n=document.getElementsByClassName(e.tag_id_or_class)[0]),n||!e.tag_id_or_class.includes("#")&&!e.tag_id_or_class.includes(".")||(n=document.querySelector(e.tag_id_or_class)),t=!0),n||o){if(o)o.innerHTML=e.html;else if(t){let t=document.createElement("div"),o=e.html,i=document.createAttribute("id");i.value=`mepuzz_countdown_embed_${e.id}`,t.setAttributeNode(i),t.innerHTML=o,e.position_embed_content&&"after"==e.position_embed_content?n.after(t):n.before(t)}else n.innerHTML=e.html;document.getElementById("viteex__bn__clockdiv-"+e.id)&&r(`viteex__bn__clockdiv-${e.id}`,d(e.id),e.id)}}function m(e){if(e.banners){let n=e.banners.configs;bannerStaticArray=n,localStorage.setItem("bannerStaticArray",JSON.stringify(bannerStaticArray)),localStorage.setItem("bannerStaticArray_date",function(e){let t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate();return 1===n.toString().length&&(n="0"+n),1===o.toString().length&&(o="0"+o),`${t}-${n}-${o} 23:59:59`}(new Date)),n&&n.forEach(e=>{let n=document.getElementById(`viteex_onsite_form_submit-${e.id}`);if(n){let o=n.getAttribute("data-language");void 0===o&&(o="vi"),t(e.id,o,e.redirect_url_after_submit,e.close_after_submit,e.code_voucher),function(e){var t=document.querySelectorAll(`[data-type=checkbox-${e}]`);if(t&&t.length>0)for(let n=0;n<t.length;n++)t[n].addEventListener("click",function(){let o=parseInt(document.getElementById(`contact-checkbox-${e}`).getAttribute("data-check"));t[n].checked?document.getElementById(`contact-checkbox-${e}`).setAttribute("data-check",o+1):document.getElementById(`contact-checkbox-${e}`).setAttribute("data-check",o-1)})}(e.id),function(e){var t=document.querySelectorAll(`[data-type=radio-${e}]`);if(t&&t.length>0)for(let n=0;n<t.length;n++)t[n].addEventListener("click",function(){let o=parseInt(document.getElementById(`contact-radio-${e}`).getAttribute("data-check"));t[n].checked&&0==o&&document.getElementById(`contact-radio-${e}`).setAttribute("data-check",1)})}(e.id)}let o=document.getElementById(`viteexSuggestsBox_${e.id}`);if(o&&i(o,e.id),document.getElementById("viteex__bn__clockdiv-"+e.id)&&r(`viteex__bn__clockdiv-${e.id}`,d(e.id),e.id),document.getElementsByClassName(`viteex__bn_countdown_option_4-${e.id}`)[0]){var c={days:a("d",e.id),hours:a("h",e.id),minutes:a("m",e.id),seconds:a("s",e.id)};setInterval(function(){s(c,d(e.id))},1e3)}e.list_product_card&&e.list_product_card.length>0&&function(e,t=!1,n=7){let o;if(!1===t)return;o=t;let i,c=document.getElementById(`viteex-product-card-${e}`);if(!c||void 0===c)return;let r=["1 phút","2 phút","3 phút","5 phút","7 phút","8 phút","10 phút","12 phút","14 phút","16 phút","18 phút","20 phút","25 phút","30 phút","36 phút","38 phút","40 phút","42 phút","45 phút","50 phút","1 giờ","2 giờ","3 giờ"];var d;setTimeout(function(){i=Math.floor(Math.random()*o.length),c.innerHTML=o[i];var e=c.getElementsByClassName("viteex-product-card-timeago")[0];e&&(e.innerHTML="Đã được mua cách đây 5 phút"),c.classList.add("slideUp");var t=c.getElementsByClassName("viteex-product-card-close")[0];t&&t.addEventListener("click",function(){c.remove(),clearInterval(d)}),setTimeout(function(){c.classList.remove("slideUp")},1e3*n)},1e3),d=setInterval(function(){for(var e=Math.floor(Math.random()*r.length),t=r[e],a=Math.floor(Math.random()*o.length);a==i&&o.length>1;)a=Math.floor(Math.random()*o.length);i=a;var s=o[a];c.innerHTML=s,product_card_time_ago=c.getElementsByClassName("viteex-product-card-timeago")[0],product_card_time_ago&&(product_card_time_ago.innerHTML="Đã được mua cách đây "+t),c.classList.add("slideUp"),btn_close=c.getElementsByClassName("viteex-product-card-close")[0],btn_close&&btn_close.addEventListener("click",function(){c.remove(),clearInterval(d)}),setTimeout(function(){c.classList.remove("slideUp")},1e3*n)},1e3*(n+2))}(e.id,e.list_product_card,e.time_show_between_products),document.getElementById(`mepuzz__box-tooltip-${e.id}`)&&(function(e){let t=document.getElementById(`mepuzzBtnClipboard-${e}`);t&&t.addEventListener("click",function(){let t=document.getElementById(`mepuzzCode-${e}`);if(t){t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value);let n=document.getElementById(`mepuzzTooltip-${e}`);n&&(n.innerHTML="Copied: "+t.value)}})}(e.id),function(e){let t=document.getElementById(`mepuzzBtnClipboard-${e}`);t&&t.addEventListener("mouseout",function(){let t=document.getElementById(`mepuzzTooltip-${e}`);t&&(t.innerHTML="Copy to clipboard")})}(e.id))})}if(e.suggests&&e.suggests.forEach(t=>{e.is_track_reload_url&&1===e.is_track_reload_url?setTimeout(function(){l(t)},3e3):l(t)}),e.countdown_embed&&e.countdown_embed.forEach(t=>{e.is_track_reload_url&&1===e.is_track_reload_url?setTimeout(function(){u(t)},3e3):u(t)}),e.news_cards){e.news_cards.forEach(t=>{if(e.is_track_reload_url&&1===e.is_track_reload_url)setTimeout(function(){let e=!1;if(t.tag_id_or_class&&((e=document.getElementById(t.tag_id_or_class))||(e=document.getElementsByClassName(t.tag_id_or_class)[0]),e||!t.tag_id_or_class.includes("#")&&!t.tag_id_or_class.includes(".")||(e=document.querySelector(t.tag_id_or_class))),e){let n=document.createElement("div"),o=t.html;n.innerHTML=o,t.position_embed_content&&"after"==t.position_embed_content?e.after(n):e.before(n),mePuzz.newsCardShow(t.id)}});else{let e=!1;if(t.tag_id_or_class&&((e=document.getElementById(t.tag_id_or_class))||(e=document.getElementsByClassName(t.tag_id_or_class)[0]),e||!t.tag_id_or_class.includes("#")&&!t.tag_id_or_class.includes(".")||(e=document.querySelector(t.tag_id_or_class))),e){let n=document.createElement("div"),o=t.html;n.innerHTML=o,t.position_embed_content&&"after"==t.position_embed_content?e.after(n):e.before(n),mePuzz.newsCardShow(t.id)}}})}if(e.navigations&&e.navigations.forEach(t=>{if(e.is_track_reload_url&&1===e.is_track_reload_url)setTimeout(function(){let e=document.getElementById("mepuzz_banner_container");if(e){let n=document.createElement("div"),o=t.html;n.innerHTML=o,t.position&&1==t.position?e.before(n):t.position&&2==t.position?e.before(n):t.position&&3==t.position&&e.after(n)}});else{let e=document.getElementById("mepuzz_banner_container");if(e){let n=document.createElement("div"),o=t.html;n.innerHTML=o,t.position&&1==t.position?e.before(n):t.position&&2==t.position?e.before(n):t.position&&3==t.position&&e.after(n)}}}),e.more_custom_content){let t=document.createElement("div"),n=document.createAttribute("style");n.value="position: relative",t.setAttributeNode(n),t.innerHTML=e.more_custom_content,document.querySelector("body").appendChild(t)}}function _(e){e}return _.prototype.customDisplayFrameless=function(e){return m.call(this,e)},_}();