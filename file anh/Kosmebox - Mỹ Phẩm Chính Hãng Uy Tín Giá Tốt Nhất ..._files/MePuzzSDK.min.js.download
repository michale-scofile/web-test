!function(){var i="ViteexSDK",M=["https://www.gstatic.com/firebasejs/7.14.4/firebase-app.js","https://www.gstatic.com/firebasejs/7.14.4/firebase-messaging.js","https://static.mepuzz.com/sdk/v2/MePuzzOnsite.min.js?v=1.1","https://api.mepuzz.com/v1/event-tag?id="],R={},v="/MePuzzWorker.js?v=1",a="266761263864",J="mePuzzDb",g="mepuzzId",q="token",h,n,F=[],G=[],w="https://api.mepuzz.com/v1/",W="/onsite",$="/onsite",H="track-banner",V="track-notif",X="/subscribe",K="/localtion",Y="product-frameless-click",Z="product-recomment-click",Q="recomment-embed-show",ee="news-card-show",te="product-news-card-click",ne=null,oe=!1,l=[],d=[],u=[],ie=[],c=[],b,y,m=[],ae={},p={getItem:function(e){return e&&this.hasItem(e)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},setItem:function(e,t,n,o,i,a){if(o="/",e&&!/^(?:expires|max\-age|path|domain|secure)$/.test(e)){var r="";if(n)switch(typeof n){case"number":r="; max-age="+n;break;case"string":r="; expires="+n;break;case"object":r="; expires="+n.toGMTString()}document.cookie=escape(e)+"="+escape(t)+r+(i?"; domain="+i:"")+"; path=/"+(a?"; secure":"")}},removeItem:function(e){var t;e&&this.hasItem(e)&&((t=new Date).setDate(t.getDate()-1),document.cookie=escape(e)+"=; expires="+t.toGMTString()+"; path=/")},hasItem:function(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}},re=localStorage.getItem("bannerConfig"),e=localStorage.getItem("bannerConfig_date"),t=z(new Date),m=t!==e||null===e||0===e.length||void 0===e?(localStorage.setItem("bannerConfig_date",t),[]):JSON.parse(re),se=navigator.platform,ce=document,de=navigator,le=screen,e=window,ue=e.encodeURIComponent,me=e.decodeURIComponent,pe=Ke(),_=L(navigator.userAgent),fe=Ye(_),ve=Ze(_),S=document.URL,ge,t=document.referrer.split("/"),I=null,k={},r=["setAppId","setUserInfo","track","setSubscriberId","sendSubscriberId","sendSubscriberId"],he,I,x=(window.addEventListener("message",function(e){b=e.source,y=e.origin;var t=U(S,"isSubdomain"),n=C(),o,i,t=("granted"!==Notification.permission&&n&&t&&0<t.length&&b&&y&&(i=U(S,"domain"),b.postMessage("setSubscriberId|"+n,y),j()),e.data),n;"string"==typeof t&&t&&0<t.length&&0<t.split("|").length&&("setSubscriberId"==(n=t.split("|"))[0]&&x.setSubscriberId(n[1]),"closeIframePopup"==n[0])&&x.closeIframePopup(n[1])},!1),void 0!==t[2]&&""!==t[0]&&(I=t[0]+"//"+t[2]),void 0!==t[2]&&""!==t[0]&&(I=t[0]+"//"+t[2]),function(e){He([arguments],r)});function z(e){var t=e.getFullYear();let n=e.getMonth()+1,o=e.getDate();return 1===n.toString().length&&(n="0"+n),1===o.toString().length&&(o="0"+o),`${t}-${n}-${o} 23:59:59`}function we(r){var e,e;h&&0<h.length&&(e=w+h+$,e=(e+="?url="+encodeURI(document.URL))+"&sub_id="+C(),fetch(e).then(function(e){return f=e.status,e.json()}).then(function(e){var t,n,o,i,n,a;1===e.success?(n=(t=e.app_config.data).app_status,o=t.app_domain,i=window.location.hostname.replace("www.",""),n&&10===n&&o&&0<=o.indexOf(i)&&((!t.subdomain||t.subdomain&&1===t.subdomain.allow)&&((n=new Date).setTime(n.getTime()+864e5),p.setItem("viteexConfig",JSON.stringify(t),n),t.viteexId)&&(window.localStorage.setItem(g,t.viteexId),A({id:g,value:t.viteexId})),e.data&&(ae.viteexData=e.data),r(t))):r(k)}).catch(function(e){}))}function be(e,t){var n=!1;return function(){n||this.readyState&&"complete"!=this.readyState||(n=!0,t())}}function ye(o){var i=M,e=window.location.hostname.replace("www.",""),t,n;for([t,n]of Object.entries(R))0<=e.indexOf(t)&&i.push(n);function a(){var e,t,n,t;i.length?(e=i.shift(),n=(t=document).createElement("script"),t=t.getElementsByTagName("script")[0],n.type="text/javascript",n.async=!0,n.defer=!0,e.includes("api.mepuzz.com/v1/event-tag?id=")&&(e+=h),n.onload=n.onreadystatechange=be(e,a),n.src=e,t.parentNode.insertBefore(n,t)):o()}a()}function _e(t){var e=window.localStorage.getItem("allowNotifSubdomain"),n=Notification.permission,o;if("granted"!==n&&e&&"1"===e&&((o=new Date).setTime(o.getTime()+864e5),p.setItem("flag_not_ask_allow_in_day",new Date,o),document.getElementById("viteex-popover-container").style.display="none"),Re()&&("granted"!==n||!e||e&&"1"!==e)){let e="<div id='viteex-popover-container' class='viteex-popover-container viteex-reset slide-down'><div id='viteex-popover-dialog' class='viteex-popover-dialog'><div id='normal-popover'><div class='popover-body'><div class='popover-body-icon'><img alt='notification icon' class='' src='{logo}'></div><div class='popover-body-message'>{msg}</div><div class='clearfix'></div></div><div class='popover-footer'><button id='viteex-popover-allow-button' class='align-right primary popover-button'>ĐỒNG Ý</button><button id='viteex-popover-cancel-button' class='align-right secondary popover-button'>KHÔNG ĐỒNG Ý</button><div class='clearfix'></div></div></div></div></div>";e=(e=e.replace("{logo}",t.logo)).replace("{msg}",t.msg);var o=document.createElement("div");o.innerHTML=e,document.querySelector("body").appendChild(o),document.getElementById("viteex-popover-allow-button").addEventListener("click",function(){window.localStorage.setItem("allowNotifSubdomain",1),document.getElementById("viteex-popover-container").style.display="none",je()}),document.getElementById("viteex-popover-cancel-button").addEventListener("click",function(){var e=new Date;e.setTime(e.getTime()+864e5),p.setItem("flag_not_ask_allow_in_day",new Date,e),document.getElementById("viteex-popover-container").style.display="none"})}}function Se(t){let n=window.localStorage.getItem(g);N(g).then(function(e){e&&null!==e&&""!==e?n!==e&&window.localStorage.setItem(g,e):setTimeout(function(){Le(t)},3e3)}).catch(function(e){window.localStorage.setItem(g,""),setTimeout(function(){Le(t)},3e3)})}function Ie(){var e=JSON.parse(p.getItem("viteexConfig")),t=k.subdomain,n=window.location.hostname.replace("www.",""),o;function i(){window.location.href!==o&&(o=window.location.href,ke())}je(),xe(),e.is_track_reload_url&&1===e.is_track_reload_url&&(o=window.location.href,setInterval(i,1e3))}function ke(){var e;S=location.href,u=[],x.track("pageview"),document.querySelector("body").removeChild(document.getElementById("mepuzz_banner_container")),we(function(){Ne(null)})}function xe(){var e="";let t=U(S,"utm_source");var n=U(S,"gclid"),o=U(S,"fbclid "),n;n&&0<n.length&&(t="google"),(t=o&&0<o.length?"facebook":t)&&0<t.length&&(p.getItem("viteex_utm_source")||((n=new Date).setTime(n.getTime()+6048e5),p.setItem("viteex_utm_source",t,n)))}function ze(){return p.getItem("viteex_utm_source")}function O(n,o,i,a,r){if(!(0<c.length&&c.includes(n)&&"view"===o)){c.includes(n)||c.push(n);var s=D();let e={method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"},cache:"no-cache",mode:"no-cors",body:JSON.stringify({app_code:h,token:s,mepuzzId:C(),banner_id:n,action:o})},t=H;r&&"undefined"!==r&&r.is_push_onsite&&(t=V,e={method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"},cache:"no-cache",mode:"no-cors",body:JSON.stringify({notif_id:n,action:o})}),fetch(w+t,e).then(function(){var e;"click"===o&&i&&null!=i&&"undefined"!==i&&0<i.length&&(a&&!et()?window.open(i,"_blank").focus():window.location=i)})}}function Oe(e,t){var n=[];e.sort(),t.sort();for(var o=0;o<e.length;o+=1)-1<t.indexOf(e[o])&&n.push(e[o])}function Te(e,t){var n=[];e.sort(),t.sort();for(var o=0;o<e.length;o+=1)-1<t.indexOf(e[o])&&n.push(e[o]);return n.length==t.length}function Ee(n){let e=localStorage.getItem("eventStaticArray");var t=localStorage.getItem("eventStaticArray_date"),o=z(new Date);if((o!==t||null===t||0===t.length||void 0===t&&"undefined"!==e)&&(localStorage.setItem("eventStaticArray_date",o),e=null),null!=(d=null!==e&&0<e.length&&void 0!==e?JSON.parse(e):[])&&d.includes(n)||(d.push(n),localStorage.setItem("eventStaticArray",JSON.stringify(d))),null!=u&&u.includes(n)||u.push(n),!l||l.length<=0){let e=localStorage.getItem("bannerStaticArray");var t=localStorage.getItem("bannerStaticArray_date"),o=z(new Date);o===t&&null!==t&&0!==t.length&&void 0!==t||(localStorage.setItem("bannerStaticArray_date",o),e=null),null!==e&&0<e.length&&void 0!==e&&"undefined"!==e&&(l=JSON.parse(e))}l&&0<l.length&&l.forEach(t=>{if(t.option.segment&&0<t.option.segment.length){let e=!0;"only_one_on_day"===t.option.display&&null!==m&&m.includes(t.id)&&(e=!1),(e="allDevice"!==t.option.device&&(E()||"mobile"!==t.option.device||(e=!1),E())&&"desktop"===t.option.device?!1:e)&&(d.sort(),u.sort(),t.option.segment&&0<t.option.segment.length?t.option.segment.forEach(e=>{var e;t.option.for_event_page&&"only_curent_page"===t.option.for_event_page?0<=e.indexOf(n)&&Te(u,e)&&(T(t,t.id,t.option.display_after,m),O(t.id,"view",null,null,t),2<=e.length)&&e.forEach(e=>{u.splice(u.indexOf(e),1)}):0<=e.indexOf(n)&&Te(d,e)&&(T(t,t.id,t.option.display_after,m),O(t.id,"view",null,null,t),2<=e.length)&&(e.forEach(e=>{d.splice(d.indexOf(e),1)}),localStorage.setItem("eventStaticArray",JSON.stringify(d)),e=z(new Date),localStorage.setItem("eventStaticArray_date",e))}):(T(t,t.id,t.option.display_after,m),O(t.id,"view",null,null,t)))}})}function T(n,e,t,o){var i=function(){if(!ie.includes(e)&&(ie.push(e),setTimeout(function(){document.getElementById(e).classList.add("viteex-bn-show"),n.option&&n.option.close_after&&0<n.option.close_after&&setTimeout(function(){s(e)},1e3*n.option.close_after),document.getElementById("viteex-btn-"+e+"-close").addEventListener("click",function(){s(e)})},1e3*t),null!=m&&m.includes(e)||((m=null==m?[]:m).push(e),localStorage.setItem("bannerConfig",JSON.stringify(m)),localStorage.setItem("bannerConfig_date",z(new Date))),n)&&n.type&&"iframe"===n.type){let e=n.iframe_attribute,t=document.getElementById(e.id).contentWindow;setTimeout(function(){t.postMessage("hi "+e.id,e.src)},2e3)}},a=setInterval(function(){document.getElementById(e)&&(clearInterval(a),i())},1e3)}function s(e){x.track("close_popup");var e=document.getElementById(e);e&&e.classList.remove("viteex-bn-show")}function E(){var e=!1,t;return t=navigator.userAgent||navigator.vendor||window.opera,e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))?!0:e}function Ne(i){var a=ae.viteexData,r=a.frameless,s=a.banners,c=a.notif_unregister,d=setInterval(function(){if("complete"==document.readyState){clearInterval(d);var t=document.createElement("div"),n=document.createAttribute("id"),n=(n.value="mepuzz_banner_container",t.setAttributeNode(n),document.createAttribute("style")),n,o;n.value="position: relative",t.setAttributeNode(n);let e="";r&&r.html&&(e+=r.html),s&&s.html&&(e+=s.html),c&&0<c.html&&(e+=c.html),t.innerHTML=e,document.querySelector("body").appendChild(t),r&&r.html&&(document.getElementById("mp-notification-button-close").addEventListener("click",function(){window.localStorage.setItem("displayFrameless",0),document.getElementById("mp-notification-"+h).classList.remove("mp-floating-cart-active")}),document.getElementById("mp-notification-button-open").addEventListener("click",function(){window.localStorage.setItem("displayFrameless",1),document.getElementById("mp-notification-"+h).classList.add("mp-floating-cart-active")}),"1"===window.localStorage.getItem("displayFrameless")?document.getElementById("mp-notification-"+h).classList.add("mp-floating-cart-active"):"0"===window.localStorage.getItem("displayFrameless")&&document.getElementById("mp-notification-"+h).classList.remove("mp-floating-cart-active"),Qe())&&r.config&&r.config.displaymodemobile&&"2"===r.config.displaymodemobile&&setTimeout(function(){document.getElementById("mp-notification-"+h).classList.remove("mp-floating-cart-active")},0),s&&s.html&&(n=s.configs,l=n)&&n.forEach(t=>{if("always"===t.option.display&&(!t.option.segment||t.option.segment.length<=0)||"only_one_on_day"===t.option.display&&(!t.option.segment||t.option.segment.length<=0)){let e=!0;"allDevice"!==t.option.device&&(E()||"mobile"!==t.option.device||(e=!1),E())&&"desktop"===t.option.device&&(e=!1),(e="only_one_on_day"===t.option.display&&null!=m&&m.includes(t.id)?!1:e)&&(T(t,t.id,t.option.display_after,m),O(t.id,"view",null,null,t))}}),i&&setTimeout(function(){i()},1e3),new ViteexOnsite(h).customDisplayFrameless(a),c&&c.html&&setTimeout(function(){var e;Ae(),O(c.id,"view",null,null,{is_push_onsite:!0})},2e3)}},100)}function Ae(){var e,t,t;"denied"!==Notification.permission||!document.getElementById("viteexFrameNotifi")||(t=p.getItem("viteexFrameNotifi"))&&"1"===t||(t=new Date(z(new Date)),p.setItem("viteexFrameNotifi","1",t),document.getElementById("viteexFrameNotifi").classList.add("viteex-bn-show"),document.getElementById("viteexFrameNotifiClose").addEventListener("click",function(){document.getElementById("viteexFrameNotifi").classList.remove("viteex-bn-show")}),x.framelessEventClick("notifBlockView",""))}function Ce(e,t){window.localStorage.setItem(e,t)}function De(e){return window.localStorage.getItem(e)}function N(s){let c=J;return new Promise(function(a,r){var e=indexedDB.open(c);e.onerror=function(e){r(Error("Error text"))},e.onupgradeneeded=function(e){e.target.transaction.abort(),r(Error("Not found"))},e.onsuccess=function(e){var t,n,o,i=e.target.result.transaction([c]).objectStore(c).get(s);i.onerror=function(e){r(Error("Error text"))},i.onsuccess=function(e){i.result?a(i.result.value):r(Error("object not found"))}}})}function A(r){let s=J;new Promise(function(i,a){void 0===r.id&&a(Error("object has no id."));var e=indexedDB.open(s);e.onerror=function(e){a(Error("IndexedDB database error"))},e.onupgradeneeded=function(e){var t,n=e.target.result.createObjectStore(s,{keyPath:"id"})},e.onsuccess=function(e){var t,n,o,e=e.target.result.transaction([s],"readwrite").objectStore(s).put(r);e.onerror=function(e){a(Error("Error text"))},e.onsuccess=function(e){i("Data saved OK")}}})}function C(){var e;return window.localStorage.getItem(g)}function Be(e){var t=window.localStorage.getItem("token");return!(t&&0<t.length)||t!==e}function je(){var e,t;/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(firebase.initializeApp({apiKey:"AIzaSyAZTU4dgmAYkG2n4xMojp4OUlSLNjGEbpg",authDomain:"mepuzz-3086c.firebaseapp.com",databaseURL:"https://mepuzz-3086c.firebaseio.com",projectId:"mepuzz-3086c",storageBucket:"mepuzz-3086c.appspot.com",messagingSenderId:"266761263864",appId:"1:266761263864:web:4544f8867ac8e71449390d"}),n=firebase.messaging(),"serviceWorker"in navigator&&navigator.serviceWorker.register(v).then(function(e){n.useServiceWorker(e),e.update(),n.onTokenRefresh(function(){n.getToken().then(function(e){B(!1),Pe(e),Me()}).catch(function(e){})}),Me(),Ue()}).catch(function(e){}),setTimeout(function(){var e;JSON.parse(p.getItem("viteexConfig")).alwaysSubcribe&&Se(D())},3e3))}function Ue(){var e;"gettoken"===U(S,"viteex").toLowerCase()&&D()}function D(){return window.localStorage.getItem("token")}function Le(e){var t=De("flgSubs"),n=De(g);qe()&&!Be(e)&&!oe&&(2===t||n)&&t&&1===t&&3!==t||(Ce("flgSubs",1),Fe(e,null))}x.setUserInfo=function(e){var t;p.getItem("mp_set_info")||(t=new Date(z(new Date)),p.setItem("mp_set_info","1",t),x.track("set_info",e))},x.setAppId=function(e){h=e},x.setSubscriberId=function(e){var t;window.localStorage.setItem(g,e),A({id:g,value:e})},x.closeIframePopup=function(e){s(e)},x.sendSubscriberId=function(e){b&&y&&b.postMessage("setSubscriberId|"+e,y)},x.track=function(o,t){var n=p.getItem("mp_sid"),n,e;n&&0!==n.length||(n=(new Date).getTime()+Math.random(),e=new Date(z(new Date)),p.setItem("mp_sid",n,e));let i=localStorage.getItem("eventStaticArray");var e=localStorage.getItem("eventStaticArray_date"),a=z(new Date),r=((a!==e||null===e||0===e.length||void 0===e&&"undefined"!==i)&&(localStorage.setItem("eventStaticArray_date",a),i=null),null!=(d=null!==i&&0<i.length&&void 0!==i?JSON.parse(i):[])&&d.includes(o)||(d.push(o),localStorage.setItem("eventStaticArray",JSON.stringify(d))),null!=u&&u.includes(o)||u.push(o),setInterval(function(){l&&0<l.length&&(clearInterval(r),Ee(o))},1e3));let s=["set_info","add_to_cart"];var c=function(e){var e,e;e&&(e=D(),e=JSON.stringify({event:o,app_code:h,token:e,mepuzzId:C(),data:t,title:document.title,url:encodeURI(document.URL),mp_sid:n}),fetch(w+"track",{method:"post",body:e}).then(function(e){return e.json()}).then(function(e){var t;s.includes(o)&&e&&e.data&&e.data.sub_id&&(window.localStorage.setItem(g,e.data.sub_id),A({id:g,value:e.data.sub_id}))}).catch(function(e){}))};if(s.includes(o))c(!0);else{let n=function(){if("pageview"===o){let e=localStorage.getItem("pageview_anonymous");var t=localStorage.getItem("pageview_anonymous_date"),n=z(new Date),t,n;n===t&&null!==t&&0!==t.length&&void 0!==t||(localStorage.setItem("pageview_anonymous_date",n),e=[]),e&&0!==e.length?null!=(t=e.split("|"))&&t.includes(encodeURI(document.URL))||(t.push(encodeURI(document.URL)),localStorage.setItem("pageview_anonymous",t.join("|")),c(!0)):((n=[]).push(encodeURI(document.URL)),localStorage.setItem("pageview_anonymous",n.join("|")),c(!0))}};N(g).then(function(e){var t;!(e&&0<e.length)||(t=!0,"pageview"===o)?n():c(!0)}).catch(function(e){n()})}},x.framelessEventClick=function(t,n,o){var e=D();let i={app_code:h,token:e,mepuzzId:C(),product_id:t,url:encodeURI(document.URL)};"notifBlockClick"!==t&&"notifBlockView"!==t||(i={app_code:h,mepuzzId:C(),action:t,url:encodeURI(document.URL)});var e={method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"},cache:"no-cache",mode:"no-cors",body:JSON.stringify(i)};fetch(w+Y,e).then(function(){var e;"notifBlockClick"===t&&"notifBlockView"===t||window.localStorage.setItem("displayFrameless",0),n&&0<n.length&&(o&&!et()?window.open(n,"_blank").focus():window.location=n)})},x.recommentEventClick=function(e,t,n,o,i){var a=D(),a={app_code:h,token:a,mepuzzId:C(),product_id:e,recomment_id:t,is_recomment_embed:n,url:encodeURI(document.URL)},e={method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"},cache:"no-cache",mode:"no-cors",body:JSON.stringify(a)};fetch(w+Z,e).then(function(){var e;o&&0<o.length&&(i&&!et()?window.open(o,"_blank").focus():window.location=o)})},x.recommentEmbedShow=function(e){var t=D(),t={app_code:h,token:t,mepuzzId:C(),recomment_id:e,url:encodeURI(document.URL)},e={method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"},cache:"no-cache",mode:"no-cors",body:JSON.stringify(t)};fetch(w+Q,e).then(function(){})},x.newsCardShow=function(e){var t,e={method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"},cache:"no-cache",mode:"no-cors",body:JSON.stringify({news_card_id:e})};fetch(w+ee,e).then(function(){})},x.productNewsCardClick=function(e,t,n,o){var i,e={method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"},cache:"no-cache",mode:"no-cors",body:JSON.stringify({product_id:e,news_card_id:t})};fetch(w+te,e).then(function(){var e;n&&0<n.length&&(o?window.open(n,"_blank").focus():window.location=n)})},x.bannerEventClick=function(e,t,n){s(e),O(e,"click",t,n,null)},x.notifEventClick=function(e,t,n){var o;O(e,"click",t,n,{is_push_onsite:!0})},x.init=function(){var e=ot[nt],t=(x.L=e&&e.l,x.loaded=!0,ot[nt]=x),e;if(e=e&&e.q)for(var n=0;n<e.length;n++)if("setAppId"===e[n][0]){h=e[n][1];break}var o=function(e){var e=(k=e).app_status,t=k.app_domain,n,o,i;let a=window.location.hostname.replace("www.","");e&&10===e&&t&&0<=t.indexOf(a)&&(k.max_receive&&A({id:"max_receive",value:k.max_receive}),o=function(){var e=k.subdomain;e&&e.url.indexOf(a)<=0&&1===e.status&&0===e.allow?_e(e):P&&He(P,r)},ye(function(){Ne(Ie),o()}))};C(),we(o)};var Pe=function(e){qe()&&!Be(e)&&!oe||Le(e)},B=function(e){window.localStorage.setItem("sendToServer",e?"1":"0")};function Me(e){var e;"denied"!==Notification.permission&&n.getToken().then(function(e){e?(Pe(ne=e),P&&He(P,r),Se(e)):(B(!1),Je())}).catch(function(e){B(!1)})}function Re(){var e=JSON.parse(p.getItem("viteexConfig"));let t=!1;var n=p.getItem("flag_not_ask_allow_in_day"),e,o,i;return e&&e.not_ask_allow_in_day&&1===e.not_ask_allow_in_day||n?(e=new Date,(!n||new Date(e.getYear(),e.getMonth(),e.getDay())<new Date(new Date(n).getYear(),new Date(n).getMonth(),new Date(n).getDay()))&&(e.setTime(e.getTime()+864e5),p.setItem("flag_not_ask_allow_in_day",new Date,e),t=!0)):t=!0,"Apple iOS"===fe&&(t=!1),t=0<=_.name.indexOf("Safari")?!1:t}function Je(){Re()&&n.requestPermission().then(function(){Me()}).catch(function(e){j()})}function qe(){return"1"===window.localStorage.getItem("sendToServer")}function Fe(r,e){let a="",s="",c="",d="",l="",u="",m="";if(e)try{void 0!==e.query&&(a=e.query),void 0!==e.city&&(s=e.city),void 0!==e.countryCode&&(c=e.countryCode),void 0!==e.country&&(d=e.country),void 0!==e.lat&&(l=e.lat),void 0!==e.lon&&(u=e.lon),void 0!==e.timezone&&(m=e.timezone)}catch(e){}let p=C();var t=function(e){var t="";let n="",o="",i;e&&(t=JSON.parse(JSON.stringify(e)),n=t.endpoint,o=t.keys.auth,i=t.keys.p256dh);var e=JSON.stringify({language:pe,subscription_id:r,mepuzzId:p,device_os:_.version,browser_name:_.name,browser_version:_.version,operating_system:fe,operating_system_version:_.osversion,device_platform:ve,device_model:se,ip:a,city:s,country_code:c,country_name:d,latitude:l,longitude:u,time_zone:m,url:encodeURI(S),url_ref:encodeURI(I),utm_source:ze(),sdk_version:2,subscriptionObject:{endpoint:n,keys:{p256dh:i,auth:o}}});fetch(w+h+X,{method:"post",body:e}).then(function(e){return e.json()}).then(function(a){flgSubs=2,window.localStorage.setItem(g,a.data.sub_id);var e,t=(A({id:g,value:a.data.sub_id}),U(S,"isSubdomain")),t=(t&&0<t.length&&b&&y&&b.postMessage("setSubscriberId|"+a.data.sub_id,y),window.localStorage.setItem(q,r),{id:q,value:r}),t=(A(t),B(!0),k.notif_welcome?k.notif_welcome.status:0);if(k&&1===t){let o=k.notif_welcome.data,i={body:o.body,icon:o.icon,image:o.image,data:{url:o.url,notif_id:k.notif_welcome.id},requireInteraction:!0};"granted"===Notification.permission&&navigator.serviceWorker.register(v).then(function(e){var e=e.showNotification(o.title,i),t=w+"track-notif?notif="+k.notif_welcome.id,n=(t=(t+="&mepuzzId="+a.data.sub_id)+("&token="+r),{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"},cache:"no-cache",mode:"no-cors",body:JSON.stringify({notif_id:k.notif_welcome.id,action:"view"})});fetch(t,n),e.onclick=function(e){var t;e.preventDefault(),window.open(o.url,"_blank").focus()}}),j()}j()}).catch(function(e){flgSubs=3})},n=function(e){navigator.serviceWorker.register(v).then(function(e){e.pushManager.getSubscription().then(function(e){t(e)}).catch(function(e){flgSubs=3,t("")})}).catch(function(e){flgSubs=3,t("")})};N(g).then(function(e){n(e)}).catch(function(e){n(p)})}function j(){U(S,"isSubdomain")&&window.close()}function U(e,t){var n,o,t=new RegExp("[\\?&#]"+t+"=([^&#]*)").exec(e);return t?me(t[1]):""}function Ge(e){if(e&&String(e)===e)return e.replace(/^\s+|\s+$/g,"")}function We(e){unescape(ue(e))}function $e(){for(var e,t,n,o,i,e=0;e<arguments.length;e+=1){i=null,arguments[e]&&arguments[e].slice&&(i=arguments[e].slice());for(var a=[],r=arguments[e],s=0,c,d;s<r.length;s++)a.push(r[s]);n=(o=a).shift(),x[n]&&x[n].apply(x,o)}}function He(e,t){for(var n={},o,i,o=0;o<t.length;o++){var a=t[o],r;for(n[a]=1,i=0;i<e.length;i++){e[i]&&e[i][0]&&a===(r=e[i][0])&&($e(e[i]),delete e[i],n[r]++)}}}function Ve(e){"string"!=typeof e&&0 instanceof String}function Xe(){var e=new Promise(function(t,e){try{var n;fetch(w+h+K).then(function(e){return f=e.status,e.json()}).then(function(e){t(e)}).catch(function(e){t("")})}catch(e){t("")}})}function Ke(){var e;if(e=navigator.language){var e,t=(e=e.toLowerCase()).split("-");if("zh"!=t[0])return t[0].substring(0,2);for(var n=0,o=L.TRADITIONAL_CHINESE_LANGUAGE_TAG;n<o.length;n++){var i=o[n];if(-1!==t.indexOf(i))return"zh-Hant"}for(var a=0,r=L.SIMPLIFIED_CHINESE_LANGUAGE_TAG;a<r.length;a++){var s=r[a];if(-1!==t.indexOf(s))return"zh-Hans"}return"zh-Hant"}return"en"}function L(t){var e=!0;function n(e){var e=t.match(e);return e&&1<e.length&&e[1]||""}var o,i=n(/(ipod|iphone|ipad)/i).toLowerCase(),a,r=!/like android/i.test(t)&&/android/i.test(t),s=/nexus\s*[0-6]\s*/i.test(t),c=!s&&/nexus\s*[0-9]+/i.test(t),d=/CrOS/.test(t),l=/silk/i.test(t),u=/sailfish/i.test(t),m=/tizen/i.test(t),p=/(web|hpw)os/i.test(t),f=/windows phone/i.test(t),v=(/SamsungBrowser/i.test(t),!f&&/windows/i.test(t)),g=!i&&!l&&/macintosh/i.test(t),h=!r&&!u&&!m&&!p&&/linux/i.test(t),w=n(/edge\/(\d+(\.\d+)?)/i),b=n(/version\/(\d+(\.\d+)?)/i),y=/tablet/i.test(t)&&!/tablet pc/i.test(t),_=!y&&/[^-]mobi/i.test(t),S=/xbox/i.test(t),f,d=(/opera/i.test(t)?o={name:"Opera",opera:!0,version:b||n(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(t)?o={name:"Opera",opera:!0,version:n(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||b}:/SamsungBrowser/i.test(t)?o={name:"Samsung Internet for Android",samsungBrowser:!0,version:b||n(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(t)?o={name:"Opera Coast",coast:!0,version:b||n(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(t)?o={name:"Yandex Browser",yandexbrowser:!0,version:b||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?o={name:"UC Browser",ucbrowser:!0,version:n(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?o={name:"Maxthon",maxthon:!0,version:n(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?o={name:"Epiphany",epiphany:!0,version:n(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?o={name:"Puffin",puffin:!0,version:n(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?o={name:"Sleipnir",sleipnir:!0,version:n(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?o={name:"K-Meleon",kMeleon:!0,version:n(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:f?(o={name:"Windows Phone",windowsphone:!0},w?(o.msedge=!0,o.version=w):(o.msie=!0,o.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?o={name:"Internet Explorer",msie:!0,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:d?o={name:"Chrome",chromeos:!0,chromeBook:!0,chrome:!0,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(t)?o={name:"Microsoft Edge",msedge:!0,version:w}:/vivaldi/i.test(t)?o={name:"Vivaldi",vivaldi:!0,version:n(/vivaldi\/(\d+(\.\d+)?)/i)||b}:u?o={name:"Sailfish",sailfish:!0,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?o={name:"SeaMonkey",seamonkey:!0,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(o={name:"Firefox",firefox:!0,version:n(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(o.firefoxos=!0)):l?o={name:"Amazon Silk",silk:!0,version:n(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?o={name:"PhantomJS",phantom:!0,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?o={name:"SlimerJS",slimer:!0,version:n(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?o={name:"BlackBerry",blackberry:!0,version:b||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:p?(o={name:"WebOS",webos:!0,version:b||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(o.touchpad=!0)):/bada/i.test(t)?o={name:"Bada",bada:!0,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:m?o={name:"Tizen",tizen:!0,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||b}:/qupzilla/i.test(t)?o={name:"QupZilla",qupzilla:!0,version:n(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||b}:/chromium/i.test(t)?o={name:"Chromium",chromium:!0,version:n(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||b}:/chrome|crios|crmo/i.test(t)?o={name:"Chrome",chrome:!0,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:r?o={name:"Android",version:b}:/safari|applewebkit/i.test(t)?(o={name:"Safari",safari:!0},b&&(o.version=b)):i?(o={name:"iphone"==i?"iPhone":"ipad"==i?"iPad":"iPod"},b&&(o.version=b)):o=/googlebot/i.test(t)?{name:"Googlebot",googlebot:!0,version:n(/googlebot\/(\d+(\.\d+))/i)||b}:{name:n(/^(.*)\/(.*) /),version:(f=/^(.*)\/(.*) /,(f=t.match(f))&&1<f.length&&f[2]||"")},!o.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(o.name=o.name||"Blink",o.blink=!0):(o.name=o.name||"Webkit",o.webkit=!0),!o.version&&b&&(o.version=b)):!o.opera&&/gecko\//i.test(t)&&(o.name=o.name||"Gecko",o.gecko=!0,o.version=o.version||n(/gecko\/(\d+(\.\d+)?)/i)),o.windowsphone||o.msedge||!r&&!o.silk?o.windowsphone||o.msedge||!i?g?o.mac=!0:S?o.xbox=!0:v?o.windows=!0:h&&(o.linux=!0):(o[i]=!0,o.ios=!0):o.android=!0,""),w=(o.windows?d=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(n(/Windows ((NT|XP)( \d\d?.\d)?)/i)):o.windowsphone?d=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):o.mac?d=(d=n(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):i?d=(d=n(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):r?d=n(/android[ \/-](\d+(\.\d+)*)/i):o.webos?d=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):o.blackberry?d=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):o.bada?d=n(/bada\/(\d+(\.\d+)*)/i):o.tizen&&(d=n(/tizen[\/\s](\d+(\.\d+)*)/i)),d&&(o.osversion=d),!o.windows&&d.split(".")[0]);return y||c||"ipad"==i||r&&(3==w||4<=w&&!_)||o.silk?o.tablet=!0:(_||"iphone"==i||"ipod"==i||r||s||o.blackberry||o.webos||o.bada)&&(o.mobile=!0),o.msedge||o.msie&&10<=o.version||o.yandexbrowser&&15<=o.version||o.vivaldi&&1<=o.version||o.chrome&&20<=o.version||o.samsungBrowser&&4<=o.version||o.firefox&&20<=o.version||o.safari&&6<=o.version||o.opera&&10<=o.version||o.ios&&o.osversion&&6<=o.osversion.split(".")[0]||o.blackberry&&10.1<=o.version||o.chromium&&20<=o.version?o.a=!0:o.msie&&o.version<10||o.chrome&&o.version<20||o.firefox&&o.version<20||o.safari&&o.version<6||o.opera&&o.version<10||o.ios&&o.osversion&&o.osversion.split(".")[0]<6||o.chromium&&o.version<20?o.c=!0:o.x=!0,o}function Ye(e){return e.mac?"Mac OS X":e.windows?"Microsoft Windows":e.windowsphone?"Microsoft Windows Phone":e.linux?"Linux":e.chromeos?"Google Chrome OS":e.android?"Google Android":e.ios?"Apple iOS":e.blackberry?"Blackberry":e.firefoxos?"Mozilla Firefox OS":e.webos?"WebOS":e.tizen?"Tizen":e.sailfish?"Sailfish OS":"Unknown"}function Ze(e){var t=e.mobile,e=e.tablet;return t?"Mobile":e?"Tablet":"Desktop"}function Qe(){var e;return"Mobile"===Ze(L(navigator.userAgent))}function et(){return!(!Qe()||"Apple iOS"!==Ye())}var tt,re=function(e){return e?e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,""):""},nt=(db=function(){},function(e){return null!=e&&-1<(e.constructor+"").indexOf("String")}(window.MePuzzAnalyticsObject)&&re(window.MePuzzAnalyticsObject)||"mePuzz"),ot=window,it=document,P,P=(P=ot[nt])&&P.q,at;if("undefined"!=typeof appId&&void 0===P)h=appId;else if("undefined"!=typeof _viteexPaq&&void 0===P){for(var o=0;o<_viteexPaq.length;o++)if("setAppId"===_viteexPaq[o][0]){h=_viteexPaq[o][1];break}}else if("undefined"!=typeof _paq&&void 0===P)for(var o=0;o<_paq.length;o++)if("setAppId"===_paq[o][0]){h=_paq[o][1];break}(0,x.init)()}(window);